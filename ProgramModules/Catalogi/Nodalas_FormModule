&НаКлиенте
Процедура NodalasVaditajsНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
    
    Ф = ПолучитьФорму("Справочник.Skolotaji.ФормаВыбора");
    Список = Ф.Список;
    Список.Отбор.Элементы.Очистить();    
    
    СписокОтбора = Новый СписокЗначений;
    СписокОтбора.Добавить(Объект.Ссылка.Пустая());
    
    Отбор = Список.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных")); 
    Отбор.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("NodalaKasVed"); 
    Отбор.ВидСравнения = ВидСравненияКомпоновкиДанных.ВСписке; 
    Отбор.Использование = Истина; 
    Отбор.ПравоеЗначение = СписокОтбора;
    
    Объект.AizstāšanaNodVad = Ф.ОткрытьМодально();
	
КонецПроцедуры

&НаСервере
Процедура ОбработкаПроверкиЗаполненияНаСервере(Отказ, ПроверяемыеРеквизиты)
	
	Для каждого grupa Из Объект.Grupas Цикл
		
		Nodalas = Справочники.Nodalas.Выбрать();
		Пока Nodalas.Следующий() Цикл
		
			Для каждого CitaNodalaGrupa Из Nodalas.Grupas Цикл
				
				Если CitaNodalaGrupa.Grupa = grupa.Grupa И Nodalas.Ссылка <> Объект.Ссылка Тогда
					
					Сообщить("Grupa " + grupa.Grupa + " jau ir " + Nodalas.Наименование + " sastava!");
					Отказ = Истина;
					
				КонецЕсли; 	
				
			КонецЦикла; 	
			

		КонецЦикла;
		
	КонецЦикла;
	
КонецПроцедуры
