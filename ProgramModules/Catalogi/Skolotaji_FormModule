&НаСервере
Функция ParādītGrafikuНаСервере()
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	StunduSaraksts.MacibuPrieksmets КАК MacibuPrieksmets,
		|	StunduSaraksts.KabinetaNumurs КАК KabinetaNumurs,
		|	StunduSaraksts.StundasNumurs КАК StundasNumurs,
		|	StunduSaraksts.NedēļasDiena КАК NedēļasDiena,
		|	StunduSaraksts.Grupa КАК Grupa
		|ИЗ
		|	РегистрСведений.StunduSaraksts КАК StunduSaraksts
		|ГДЕ
		|	StunduSaraksts.Skolotajs = &Skolotajs
		|
		|УПОРЯДОЧИТЬ ПО
		|	StundasNumurs,
		|	NedēļasDiena";
	
	Запрос.УстановитьПараметр("Skolotajs", Справочники.Skolotaji.НайтиПоКоду(Объект.Код));
	
	РезультатЗапроса = Запрос.Выполнить();
	
	ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
	
	Таб = Новый ТабличныйДокумент;
	Таб.ПолеСверху = 3;
	Таб.ИмяПараметровПечати = "DRUKAS_PARAMETRI_stundu_grafiks_skolotajiem_drukasana";
	Таб.АвтоМасштаб = Истина;
	Макет = ПолучитьОбщийМакет("StunduGrafiksSkolotajiem");
	ОбластьШапка = Макет.ПолучитьОбласть("Шапка");
	ОбластьУрок = Макет.ПолучитьОбласть("Stunda");
	
	ОбластьШапка.Параметры.subjekts = Объект.Наименование;
	Таб.Вывести(ОбластьШапка);
		
	ОбластьУрок.Параметры.StNr = 0;
	ОбластьУрок.Параметры.time = "7:45 - 8:25";
	ТекущийУрок = 0;
	
	Очистка = Новый Структура;
	Очистка.Вставить("Prieksmets1");
	Очистка.Вставить("Prieksmets2");
	Очистка.Вставить("Prieksmets3");
	Очистка.Вставить("Prieksmets4");
	Очистка.Вставить("Prieksmets5");
	
	Очистка.Вставить("Grupa1");
	Очистка.Вставить("Grupa2");
	Очистка.Вставить("Grupa3");
	Очистка.Вставить("Grupa4");
	Очистка.Вставить("Grupa5");
	
	Очистка.Вставить("KabNr1");
	Очистка.Вставить("KabNr2");
	Очистка.Вставить("KabNr3");
	Очистка.Вставить("KabNr4");
	Очистка.Вставить("KabNr5");
	
	Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		
		//Сообщить("" + ВыборкаДетальныеЗаписи.StundasNumurs + ", " + ВыборкаДетальныеЗаписи.NedēļasDiena + ", " +  ВыборкаДетальныеЗаписи.MacibuPrieksmets ); 
		
		Пока ТекущийУрок < ВыборкаДетальныеЗаписи.StundasNumurs Цикл
			
			ТекущийУрок = ТекущийУрок + 1;
			Таб.Вывести(ОбластьУрок);
			ОбластьУрок.Параметры.Заполнить(Очистка);
			ОбластьУрок.Параметры.StNr = ТекущийУрок;
			
			Если ТекущийУрок = 1 Тогда
				
				ОбластьУрок.Параметры.time = "8:30 - 9:10";		
				
			ИначеЕсли ТекущийУрок = 2 Тогда 
				
				ОбластьУрок.Параметры.time = "9:15 - 9:55";
				
			ИначеЕсли ТекущийУрок = 3 Тогда 
				
				ОбластьУрок.Параметры.time = "10:10 - 10:50";
				
			ИначеЕсли ТекущийУрок = 4 Тогда 
				
				ОбластьУрок.Параметры.time = "10:55 - 11:35";
				
			ИначеЕсли ТекущийУрок = 5 Тогда 
				
				ОбластьУрок.Параметры.time = "11:45 - 12:25";
				
			ИначеЕсли ТекущийУрок = 6 Тогда 
				
				ОбластьУрок.Параметры.time = "12:30 - 13:10";
				
			ИначеЕсли ТекущийУрок = 7 Тогда 
				
				ОбластьУрок.Параметры.time = "13:20 - 14:00";
				
			ИначеЕсли ТекущийУрок = 8 Тогда 
				
				ОбластьУрок.Параметры.time = "14:05 - 14:45";
				
			ИначеЕсли ТекущийУрок = 9 Тогда 
				
				ОбластьУрок.Параметры.time = "14:50 - 15:30";
				
			ИначеЕсли ТекущийУрок = 10 Тогда 
				
				ОбластьУрок.Параметры.time = "15:35 - 16:15";
				
			ИначеЕсли ТекущийУрок = 11 Тогда 
				
				ОбластьУрок.Параметры.time = "16:20 - 17:00";
				
			ИначеЕсли ТекущийУрок = 12 Тогда 
				
				ОбластьУрок.Параметры.time = "17:05 - 17:45";
				
			КонецЕсли;	
			
		КонецЦикла;  
		
		
		Если ВыборкаДетальныеЗаписи.NedēļasDiena = Перечисления.NedēļasDienas.Pirmdiena Тогда
			
			ОбластьУрок.Параметры.Prieksmets1 = ВыборкаДетальныеЗаписи.MacibuPrieksmets;	
			ОбластьУрок.Параметры.Grupa1 = ВыборкаДетальныеЗаписи.Grupa;
			ОбластьУрок.Параметры.KabNr1 = "" + ВыборкаДетальныеЗаписи.KabinetaNumurs + ". kab.";
			
		ИначеЕсли ВыборкаДетальныеЗаписи.NedēļasDiena = Перечисления.NedēļasDienas.Otrdiena Тогда
		
			ОбластьУрок.Параметры.Prieksmets2 = ВыборкаДетальныеЗаписи.MacibuPrieksmets;	
			ОбластьУрок.Параметры.Grupa2 = ВыборкаДетальныеЗаписи.Grupa;
			ОбластьУрок.Параметры.KabNr2 = "" + ВыборкаДетальныеЗаписи.KabinetaNumurs + ". kab.";
			
		ИначеЕсли ВыборкаДетальныеЗаписи.NedēļasDiena = Перечисления.NedēļasDienas.Tresdiena Тогда
		
			ОбластьУрок.Параметры.Prieksmets3 = ВыборкаДетальныеЗаписи.MacibuPrieksmets;	
			ОбластьУрок.Параметры.Grupa3 = ВыборкаДетальныеЗаписи.Grupa;
			ОбластьУрок.Параметры.KabNr3 = "" + ВыборкаДетальныеЗаписи.KabinetaNumurs + ". kab.";
			
		ИначеЕсли ВыборкаДетальныеЗаписи.NedēļasDiena = Перечисления.NedēļasDienas.Ceturdiena Тогда
		
			ОбластьУрок.Параметры.Prieksmets4 = ВыборкаДетальныеЗаписи.MacibuPrieksmets;	
			ОбластьУрок.Параметры.Grupa4 = ВыборкаДетальныеЗаписи.Grupa;
			ОбластьУрок.Параметры.KabNr4 = "" + ВыборкаДетальныеЗаписи.KabinetaNumurs + ". kab.";
			
		ИначеЕсли ВыборкаДетальныеЗаписи.NedēļasDiena = Перечисления.NedēļasDienas.Piektdiena Тогда
		
			ОбластьУрок.Параметры.Prieksmets5 = ВыборкаДетальныеЗаписи.MacibuPrieksmets;	
			ОбластьУрок.Параметры.Grupa5 = ВыборкаДетальныеЗаписи.Grupa;
			ОбластьУрок.Параметры.KabNr5 = "" + ВыборкаДетальныеЗаписи.KabinetaNumurs + ". kab.";		
		
		КонецЕсли; 
		
	КонецЦикла;
	
	Таб.Вывести(ОбластьУрок);
	
	Возврат Таб;

КонецФункции

&НаКлиенте
Процедура ParādītGrafiku(Команда)
	
	ParādītGrafikuНаСервере().Показать("Skolotaja grafiks");	
	
КонецПроцедуры

&НаКлиенте
Процедура НаименованиеОкончаниеВводаТекста(Элемент, Текст, ДанныеВыбора, ПараметрыПолученияДанных, СтандартнаяОбработка)
	
	Текст = СокрЛП(Текст);
	
КонецПроцедуры


Если Объект.NodalaKasVed <> Объект.NodalaKasVed.Пустая() Тогда

	Элементы.NodalaKasVed.Видимость = Истина;	

КонецЕсли;
