&НаСервере
Процедура ПослеЗаписиНаСервере(ТекущийОбъект, ПараметрыЗаписи)
	
	JaunaMacProg = Справочники.Nodalas.НайтиПоНаименованию(ТекущийОбъект.Nodala);
	
	Если JaunaMacProg.MacibuProgrammas.Найти(ТекущийОбъект.Ссылка, "Nosaukums") = Неопределено Тогда
	
		JaunaMacProg = JaunaMacProg.ПолучитьОбъект();
		Данные = JaunaMacProg.MacibuProgrammas.Добавить();
		Данные.Nosaukums = ТекущийОбъект.Ссылка;
		JaunaMacProg.Записать();	
	
	КонецЕсли; 	
	
КонецПроцедуры


&НаСервере
Процедура ОбработкаПроверкиЗаполненияНаСервере(Отказ, ПроверяемыеРеквизиты)
	
	MacProg = Справочники.MacibuProgrammas.НайтиПоНаименованию(Объект.Наименование);
	Если MacProg <> Справочники.MacibuProgrammas.ПустаяСсылка() И MacProg <> Объект.Ссылка Тогда
	
		Сообщить("Macibu programa '" + Объект.Наименование + "' jau ir datubaze!");
		Отказ = Истина;
	
	КонецЕсли; 
	
КонецПроцедуры
